<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>今日のひとことメーカー</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900 min-h-screen flex flex-col items-center justify-center p-4 font-sans text-gray-100">

    <div class="w-full max-w-md mx-auto bg-gray-800 rounded-2xl shadow-lg p-6 md:p-10 text-center transition-all duration-300">
        
        <header class="mb-8">
            <h1 class="text-2xl md:text-3xl font-bold text-white">
                今日のひとことメーカー
            </h1>
            <p class="text-gray-400 mt-2">あなたに元気をお届けします</p>
        </header>

        <div class="mb-8">
            <button
                id="showMessageBtn"
                class="w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-gray-500"
            >
                メッセージを表示
            </button>
        </div>

        <div id="messageContainer" class="h-28 flex flex-col items-center justify-center space-y-2">
            <p id="placeholderText" class="text-gray-500">ボタンを押してください</p>
        </div>

    </div>

    <footer class="text-center text-gray-500 text-sm mt-8">
        <p>&copy; <span id="year"></span> Today's Word Maker</p>
    </footer>

    <script>
        const messages = [
            '一歩ずつで大丈夫です。',
            '今日もあなたは輝いています。',
            '小さな成功を祝いましょう。',
            'あなたの努力は必ず報われます。',
            '大丈夫、すべてはうまくいきます。',
            '自分を信じて進みましょう。',
            '困難の先には光があります。',
            'あなたは一人ではありません。',
            '今日の頑張りが未来を作ります。',
            '素晴らしい一日になりますように。',
            '焦らないで、あなたのペースで。',
            'たまにはゆっくり休みましょう。',
        ];

        const btn = document.getElementById("showMessageBtn");
        const container = document.getElementById("messageContainer");
        const placeholderText = document.getElementById("placeholderText");

        let currentMessage = null;
        let isAnimating = false;
        const favorites = [];

        // 長押し検知用
        let pressTimer;

        function displayMessage(msg) {
            container.style.opacity = 0;

            setTimeout(() => {
                currentMessage = msg;
                const heart = favorites.includes(msg) ? '❤️ ' : '';
                container.innerHTML = `
                    <div class="transition-opacity duration-300 opacity-100">
                        <div class="bg-gray-700 border-l-4 border-gray-500 p-4 rounded-r-lg w-full">
                            <p class="text-lg md:text-xl font-medium text-white">${heart}${msg}</p>
                        </div>
                    </div>
                `;
                container.style.opacity = 1;
                isAnimating = false;
            }, 300);
        }

        function getRandomMessage() {
            let newMessage = messages[Math.floor(Math.random() * messages.length)];
            if (messages.length > 1) {
                while (newMessage === currentMessage) {
                    newMessage = messages[Math.floor(Math.random() * messages.length)];
                }
            }
            return newMessage;
        }

        // 通常クリック
        btn.addEventListener("click", () => {
            if (isAnimating) return;
            isAnimating = true;
            displayMessage(getRandomMessage());
        });

        // 長押しでお気に入り登録
        btn.addEventListener("touchstart", (e) => {
            pressTimer = setTimeout(() => {
                if (currentMessage && !favorites.includes(currentMessage)) {
                    favorites.push(currentMessage);
                    displayMessage(currentMessage);
                    alert("お気に入りに登録しました！");
                }
            }, 500); // 0.5秒長押し
        });

        btn.addEventListener("touchend", (e) => {
            clearTimeout(pressTimer);
        });

        // 年号
        document.getElementById("year").textContent = new Date().getFullYear();
    </script>

</body>
</html>
